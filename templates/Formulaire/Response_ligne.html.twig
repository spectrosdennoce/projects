<ul class="list-group"  id="ul-line">
    {% for Ligne in Lignes %}
        <li class="list-group-item" id="{{ Ligne.getID() }}">
            <div class="form-row">
                <h5>{{Ligne.getTitre()}} {% if Ligne.getObli() == 1 %} <i class="fas fa-exclamation-triangle" style="color:red;"></i> {% endif %} </h5> 
            </div>
                {% if Ligne.getType() == 3 or Ligne.getType() == 4 %}
                <div class="form-group d-flex justify-content-center">
                    {% for InLine in Ligne.getInLine() %}
                    <div class="form-check form-check-inline">
                        <input name="{{ Ligne.getId() }}" id="{{ InLine.getId() }}" class="form-check-input"
                        {% if Disabled == true %}disabled{% endif %}
                        {% if Ligne.getType() == 3 %} type="radio" {% endif %}
                        {% if Ligne.getType() == 4 %} type="checkbox" {% endif %}
                        {% for Reponse in Reponses %}
                            {% if InLine.getId() == Reponse.getReponse() %}
                                checked
                            {% endif %}
                        {% endfor %}
                        require={{ Ligne.getObli() }}
                        autocomplete="off">
                    <label class="form-check-label" for="{{ InLine.getId() }}">{{ InLine.getTitre() }}</label>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="form-group row">
                    <input name="text" id="{{Ligne.getId()}}"
                    {% if Disabled == true %}disabled{% endif %}
                    {% if Ligne.getType() == 1 %} type="text" 
                        {% for Reponse in Reponses %}
                            {% if  Ligne.getId() == Reponse.getLignesForms().getId() %}
                                value="{{ Reponse.getReponse() }}"
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% if Ligne.getType() == 2 %} type="date"
                        {% for Reponse in Reponses %}
                            {% if Ligne.getId() == Reponse.getLignesForms().getId() %}
                                value="{{ Reponse.getReponse()|date("Y-m-d") }}" 
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    class="form-control" autocomplete="off"
                    ></input>
                </div>
                {% endif %}
        </li>
    {% endfor %}
</ul>
{% if Disabled == false %}
    <button class='btn btn-success col-sm-12' id="Valide">Valider Reponse</button>
    {% block javascript %}
        <script>
            $('body').on('focusout', 'input[type=text]', function(){
                $.post( "/Formulaire/Change_Reponse_Ligne/", { Id_Forms: {{ formulaire.getID() }},Parent: $(this).attr("name"),Id: $(this).attr("id"), Value : $(this).val() } );
            });
            $('body').on('change', 'input[type=checkbox],input[type=radio]', function(){
                $.post( "/Formulaire/Change_Reponse_Ligne/", { Id_Forms: {{ formulaire.getID() }},Parent: $(this).attr("name"),Id: $(this).attr("id"), Value : $(this).prop('checked') } );
            });
            $('body').on('change', 'input[type=date]', function(){
                $.post( "/Formulaire/Change_Reponse_Ligne/", { Id_Forms: {{ formulaire.getID() }},Parent: $(this).attr("name"),Id: $(this).attr("id"), Value : $(this).val() } );
            });
            $('body').on('click', '#Valide', function(){
                $.post( "/Formulaire/Change_State_Ligne/", { Id_Forms: {{ formulaire.getID() }} } );
            });
        </script>
    {% endblock %}
{% endif %}